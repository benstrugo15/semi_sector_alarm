import smtplib
from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText
from src.conf.conf_loader import GMAIL_CONFIG
from datetime import datetime
import os
from typing import Dict, List, Union


class EmailSender:
    def __init__(self, date: str):
        self.date = date

    def send_email(self, gmail_data: Union[str, List[Dict[str, Union[str, int, float]]]], error=None):
        msg = MIMEMultipart()
        msg['From'] = GMAIL_CONFIG.FROM
        msg['To'] = ', '.join(GMAIL_CONFIG.TO)
        msg['Subject'] = "סמי סקטורים עתידניים בפריצה " + self.date
        if error is not None:
            msg.attach(MIMEText(gmail_data, "plain"))
        else:
            body = self.build_html(gmail_data)
            msg.attach(MIMEText(body, "html"))
        try:
            with smtplib.SMTP(GMAIL_CONFIG.SMTP_SERVER, GMAIL_CONFIG.SMTP_PORT) as server:
                server.starttls()
                password = os.getenv("GMAIL_PASSWORD")
                server.login(GMAIL_CONFIG.FROM, password)
                text = msg.as_string()
                server.sendmail(GMAIL_CONFIG.FROM, GMAIL_CONFIG.TO, text)
                print("Email sent successfully!")
        except Exception as e:
            print(f"Failed to send email: {e}")

    def build_html(self, gmail_data):
        unique_sub_sectors = list(set(list({entry['core_focus'] for entry in gmail_data})))
        start_html = self.build_start_html(unique_sub_sectors)
        middle_html = self.build_middle_html(start_html, gmail_data, unique_sub_sectors)
        end_html = self.build_end_html(middle_html)
        return end_html

    def build_start_html(self, unique_sub_sectors):
        html_content = f"""
                <html dir="rtl" lang="he">
                <head>
                    <title>סמי סקטורים עתידניים בפריצה</title>
                    <style>
                        body {{ font-family: Arial, sans-serif; direction: rtl; text-align: right; }}
                        h1 {{ color: darkblue; text-align: right; }}
                        h2, h3 {{ color: darkred; text-align: right; }}
                        p {{ margin-right: 20px; text-align: right; }}
                        ul {{ direction: rtl; text-align: right; }}
                        li {{ text-align: right; }}
                        a {{ text-decoration: none; color: blue; }}
                        .large {{ font-size: large; font-weight: bold; text-align: right; }}
                        .medium {{ font-size: medium; text-align: right; }}
                    </style>
                </head>
                <body>
            <h1>סמי סקטורים עתידניים בפריצה - {self.date}</h1>
            <div class="large" style="font-size: 22px;">Strugo Bot Alart</div>
            <ul>
        """
        for sub_sector in unique_sub_sectors:
            html_content += f"<li class='sector-item' style='font-size: 20px;'>{sub_sector}</li>"
        html_content += "</ul>"
        html_content += "<br>"
        return html_content

    def build_middle_html(self, html_content, gmail_data, unique_sub_sectors):
        for sub_sector in unique_sub_sectors:
            html_content += f"<h2>{sub_sector}</h2>"
            core_focus_overview = [x['core_focus_overview'] for x in gmail_data if x['core_focus'] == sub_sector][0]
            is_core_focus_future_potential = \
            [x['is_core_focus_future_potential'] for x in gmail_data if x['core_focus'] == sub_sector][0]
            core_focus_future_potential_overview = \
            [x['core_focus_future_potential_overview'] for x in gmail_data if x['core_focus'] == sub_sector][0]

            html_content += f"""
            <p><strong>סקירה על הסמי סקטור</strong></p>
            <p>{core_focus_overview}</p>
            <p><strong>למה הסמי סקטור הזה הוא העתיד</strong></p>
            <p>{core_focus_future_potential_overview}</p>
            """
            sector_data = [item for item in gmail_data if item['core_focus'] == sub_sector]
            for item in sector_data:
                news_pieces = list(set(item['news_data'].split('***')))
                sources = list(set(item['news_source'].split('***')))
                news_html = "<ul style='direction: rtl;'>" + "".join(
                    f"<li>{news.strip()} (<a href='{src.strip()}'>מקור</a>)</li>" for news, src in
                    zip(news_pieces, sources)) + "</ul>"

                html_content += f"""
                <h3>{item['symbol']}</h3>
                <p><strong>שווי שוק:</strong> {"{:,}".format(item['marketCap'])} $</p>
                <p><strong>מחיר:</strong> {item['last_price']}$</p>
                <p><strong>שינוי יומי:</strong> {round(item['last_percent'], 2)}%</p>
                <p><strong>שינוי ב7 ימי המסחר האחרונים:</strong> {round(item['start_end_percent'], 2)}%</p>
                <p><strong>סקירה על המניה</strong></p>
                <p>{item['company_overview']}</p>
                <p><strong>חדשות תומכות</strong></p>
                <p>{news_html}</p>
                """
        return html_content

    def build_end_html(self, html_content):
        html_content += """
            </div>
        </body>
        </html>
        """
        return html_content





if __name__ == '__main__':
    data = [{'symbol': 'ATYR', 'news_source': 'אין מידע', 'news_data': 'אין מידע', 'core_focus': 'ביופרמציה', 'core_focus_overview': 'ביופרמציה היא תחום בו נוצרות טיפולים למגוון מחלות באמצעות כלים ביולוגיים.', 'is_core_focus_future_potential': True, 'core_focus_future_potential_overview': 'לביופרמציה יש את הפוטנציאל ליצור טיפולים יותר יעילים ואישיים למטופלים, מהפכה בתחום הבריאות.', 'company_overview': 'aTyr Pharma Inc היא חברה ביותרפאוטיכלית העוסקת בגילוי ופיתוח תרופות מדור ראשון מפלטפורמת ה-tRNA סינתאז. החברה התמקדה במאמצי מחקר ופיתוח שלה באזור ביולוגה חדש שנגלה, הפונקציונאליות החיצונית ומסלולי האיתות של סינתאזי ה-tRNA. העשרה הראשונה שלה היא efzofitimod, מועמד למוצר שנמצא בשלב קליני אשר ממקד את NRP2 כדי לפתור דלקת כרונית המובילה לפיברוזיס. ל-efzofitimod יש מנגנון פעולה חדשני שטופל פוטנציאלית בדלקת ריאה ופיברוזיס.', 'marketCap': 303871513, 'last_price': 3.26, 'last_percent': 9.030100334448154, 'start_end_percent': 46.188340807174875}, {'symbol': 'COEP', 'news_source': 'אין מידע', 'news_data': 'אין מידע', 'core_focus': 'ביופרמציה', 'core_focus_overview': 'ביופרמציה היא תחום בו נוצרות טיפולים למגוון מחלות באמצעות כלים ביולוגיים.', 'is_core_focus_future_potential': True, 'core_focus_future_potential_overview': 'לביופרמציה יש את הפוטנציאל ליצור טיפולים יותר יעילים ואישיים למטופלים, מהפכה בתחום הבריאות.', 'company_overview': 'Coeptis Therapeutics Holdings Inc היא חברת ביופרמציה המפתחת פלטפורמות לטיפול בתאים לחולים עם סרטן. תיק המוצרים של החברה כולל טכנולוגיה של תאים טורים משולשים עם אנטיגנים (CAR T), טכנולוגיה לטיפול בתאים (CD38-GEAR-NK) ואבחנה in vitro (אבחנה-CD38) אשר ממקדת סרטנים הקשורים ל-CD38 שהחברה מפתחת עם VyGen-Bio וחוקרים רפואיים במכון הקרלינסקה.', 'marketCap': 226152262, 'last_price': 0.222, 'last_percent': 6.2200956937799035, 'start_end_percent': 24.02234636871509}, {'symbol': 'IKT', 'news_source': 'אין מידע', 'news_data': 'אין מידע', 'core_focus': 'ביופרמציה', 'core_focus_overview': 'ביופרמציה היא תחום בו נוצרות טיפולים למגוון מחלות באמצעות כלים ביולוגיים.', 'is_core_focus_future_potential': True, 'core_focus_future_potential_overview': 'לביופרמציה יש את הפוטנציאל ליצור טיפולים יותר יעילים ואישיים למטופלים, מהפכה בתחום הבריאות.', 'company_overview': 'Inhibikase Therapeutics Inc היא חברה פרמצבטיקלית בשלב קליני המפתחת תרופות מונעות קינאז לשינוי מעגל החולי של פארקינסון ("PD"), הורדות פארקינסון המשתלשות ומחלות אחרות של הקינז הטירוזמן של אבלסון. סילוס הטיפולים המרובה שלה מתמקד באופן ראשי בהורדה של מערכות עצב המוח והתוכנית שלה שמשתמשת בריסבודטיניב (שהוא גם IkT-148009), חומר פעיל שייבלע את הטירוזבמן הלא רפטורי של אבלסון, מכוונת לטיפול במחלת פארקינסון בתוך ומחוץ למוח כמו גם מחלות אחרות שנגרמות מהטירוזין של אבלסון.', 'marketCap': 218375852, 'last_price': 2.22, 'last_percent': 4.225352112676073, 'start_end_percent': 51.020408163265316}, {'symbol': 'VSTM', 'news_source': 'אין מידע', 'news_data': 'אין מידע', 'core_focus': 'ביופרמציה', 'core_focus_overview': 'ביופרמציה היא תחום בו נוצרות טיפולים למגוון מחלות באמצעות כלים ביולוגיים.', 'is_core_focus_future_potential': True, 'core_focus_future_potential_overview': 'לביופרמציה יש את הפוטנציאל ליצור טיפולים יותר יעילים ואישיים למטופלים, מהפכה בתחום הבריאות.', 'company_overview': 'Verastem Inc היא חברת ביופרמציה בשלב הפיתוח המאוחר, המחויבת לקידום תרופות חדשות למטופלים בסרטן. חניכה שלה מתמקדת בסוכנים אנטי-סרטן חדשים שממעיטים מדרכי איתות קריטיות בסרטן שמקדמות את הישרדות תאי הסרטן וצמיחת הגידול, במיוחד דרך קינאזה של RAF / MEK ו-dorsi.', 'marketCap': 230098739, 'last_price': 3.57, 'last_percent': 20.608108108108112, 'start_end_percent': 20.202020202020186}, {'symbol': 'ZBIO', 'news_source': 'אין מידע', 'news_data': 'אין מידע', 'core_focus': 'ביופרמציה', 'core_focus_overview': 'ביופרמציה היא תחום בו נוצרות טיפולים למגוון מחלות באמצעות כלים ביולוגיים.', 'is_core_focus_future_potential': True, 'core_focus_future_potential_overview': 'לביופרמציה יש את הפוטנציאל ליצור טיפולים יותר יעילים ואישיים למטופלים, מהפכה בתחום הבריאות.', 'company_overview': 'Zenas BioPharma Inc היא חברת ביופרמציה בשלב של הליך קליני. המועמד למוצר I&I שלה, obexelimab, הוא אנטי-גוף מונוקלונאלי דו-פונקציונאלי שנוצר לקישור גם ל-CD19 ו-FcyRIIb, שנמצאים ברחבי מעלל התאים B, כדי למנוע את פעילות התאים שמעורבים ברבים ממחלות אי-חיסוניות ללא הפועלים עליהם.', 'marketCap': 342268593, 'last_price': 23.23, 'last_percent': 8.856607310215558, 'start_end_percent': 33.275960986804364}, {'symbol': 'JSPR', 'news_source': 'אין נתונים', 'news_data': 'אין נתונים', 'core_focus': 'ביוטכנולוגיה', 'core_focus_overview': 'הביוטכנולוגיה משתמשת במערכות ביולוגיות ואורגניזמים כדי ליצור או לשנות מוצרים.', 'is_core_focus_future_potential': True, 'core_focus_future_potential_overview': 'לביוטכנולוגיה יש הפוטנציאל להביא למהפכה בתחומים כמו בריאות, חקלאות ובר קיימאות סביבתית.', 'company_overview': "החברה 'Jasper Therapeutics Inc' היא חברת ביוטכנולוגיה בשלבים קליניים המוקדשת לאפשרות של מרפאות באמצעות טיפול בתאי גזע המטפוריים. היא מתמקדת בפיתוח והסחרות של חומרים מותנים בטוחים ויעילים יותר ובהנדסת תאי גזע כדי לאפשר שימוש נרחב יותר בהשתלות תאי גזע ואנימות בשיטה של חוץ-גוף.", 'marketCap': 320728927, 'last_price': 19.9, 'last_percent': -0.698602794411185, 'start_end_percent': 32.57828114590273}, {'symbol': 'TYRA', 'news_source': 'אין נתונים', 'news_data': 'אין נתונים', 'core_focus': 'ביוטכנולוגיה', 'core_focus_overview': 'הביוטכנולוגיה משתמשת במערכות ביולוגיות ואורגניזמים כדי ליצור או לשנות מוצרים.', 'is_core_focus_future_potential': True, 'core_focus_future_potential_overview': 'לביוטכנולוגיה יש הפוטנציאל להביא למהפכה בתחומים כמו בריאות, חקלאות ובר קיימאות סביבתית.', 'company_overview': "החברה 'Tyra Biosciences Inc' היא חברת ביוטכנולוגיה בשלבים קליניים המתמקדת בפיתוח תרופות מדויקות מדור הבא המתמקדות בהזדמנויות גדולות בביולוגיה של מקלט גידול סיברובלסט (FGFR). פלטפורמת הרפואה המדויקת של החברה, SNÅP, מאפשרת עיצוב תרופות מהיר ומדויק באמצעות תמונות מולקולריות עשויות SSHAPs שמסייעות לחזות את השינויים הגנטיים הסבירים ביותר לגרום להתנגדות מופקת לתרופות קיימות. בקידום המוצר שלה נמצא TYRA 300, חוסם בחירה של FGFR3 עם מיקוד ראשוני בחולים עם קרצינומת השתן מתקדמת של בלדר השריר והדרך השתנית מטסטיקה.", 'marketCap': 703381575, 'last_price': 28.37, 'last_percent': 3.805342114892074, 'start_end_percent': 29.30720145852324}, {'symbol': 'CLSK', 'news_source': 'https://www.benzinga.com/news/mid-cap/24/10/41419173/oklo-cleanspark-and-wolfspeed-are-among-top-7-mid-cap-gainers-last-week-oct-14-18-are-the-others-in***https://www.benzinga.com/markets/cryptocurrency/24/10/41357475/top-3-cryptocurrency-stocks-poised-for-major-gains***https://www.investing.com/analysis/top-3-cryptocurrency-stocks-for-investors-seeking-doubledigit-upside-potential', 'news_data': 'אוקלו, קליןספארק ווולףספיד הן בין שבעת המניות הבינוניות בעלות התרומה הגדולה ביותר בשבוע האחרון (14-18 באוקטובר): האם האחרות נמצאות בתיק השקעות שלך?*** שלושת המניות המובילות בקריפטו עשויות להרוויח תשואות גדולות*** שלושת המניות המובילות בקריפטו עבור משקיעים שמחפשים פוטנציאל להכפלה דו-ספרתית', 'core_focus': 'כריית ביטקוין', 'core_focus_overview': 'כריית ביטקוין כוללת עיבוד עסקאות במטבע הדיגיטלי, ביטקוין.', 'is_core_focus_future_potential': True, 'core_focus_future_potential_overview': 'כריית ביטקוין מספקת את התשתית למטבע דיגיטלי מבוזר, אשר עשוי לשנות מערכות פיננסיות.', 'company_overview': 'Cleanspark Inc היא חברה לכריית ביטקוין. באמצעות CleanSpark, Inc., ובאמצעות המסביבות הבעלות 100% של החברה, החברה כורת ביטקוין. החברה הכניסה לתעשיית כריית הביטקוין באמצעות רכישתה של ATL. כריית הביטקוין היא הסעיף הדווח היחיד של החברה.', 'marketCap': 2586183353, 'last_price': 12.69, 'last_percent': -1.3219284603421477, 'start_end_percent': 32.32533889468196}, {'symbol': 'WULF', 'news_source': 'אין נתונים', 'news_data': 'אין נתונים', 'core_focus': 'כריית ביטקוין', 'core_focus_overview': 'כריית ביטקוין כוללת עיבוד עסקאות במטבע הדיגיטלי, ביטקוין.', 'is_core_focus_future_potential': True, 'core_focus_future_potential_overview': 'כריית ביטקוין מספקת את התשתית למטבע דיגיטלי מבוזר, אשר עשוי לשנות מערכות פיננסיות.', 'company_overview': 'TeraWulf Inc היא חברה טכנולוגית לנכסים דיגיטליים, שעוסקת בתשתית דיגיטלית ובפיתוח אנרגיה בר-קיימא. המוקד העיקרי של החברה הוא תמיכה בפעולות כריית ביטקוין תוך מינימום פגיעה בסביבה, על ידי פיתוח והפעלת מתקנים בארצות הברית. מתקני הכרייה של החברה מופעלים באמצעות מקורות אנרגיה נקיים, זולים ומהימנים. מקור ההכנסה העיקרי של החברה מגיע מכריית ביטקוין שמתבצעת באתרי מתקני הכרייה שלה. בנוסף, החברה מעת לעת מרוויחה הכנסה באמצעות מתן שירותי הארחה של כריים לגורמים שלישיים.', 'marketCap': 2184237474, 'last_price': 6.21, 'last_percent': 18.511450381679385, 'start_end_percent': 47.50593824228029}, {'symbol': 'COIN', 'news_source': 'https://www.benzinga.com/news/large-cap/24/10/41418879/coinbase-united-airlines-and-sofi-tech-are-among-top-11-large-cap-gainers-last-week-oct-14-18-are-***https://www.globenewswire.com/news-release/2024/10/20/2965822/673/he/RLF-%D7%97%D7%91%D7%A8%D7%94-%D7%A9%D7%A4%D7%AA%D7%97%D7%94-%D7%91%D7%94%D7%9C%D7%99%D7%9B%D7%99%D7%9D-%D7%A8%D7%90%D7%A9%D7%95%D7%A0%D7%94-%D7%9E%D7%A2%D7%95%D7%93%D7%93%D7%AA-%D7%90%D7%AA-%D7%9E%D7%A9%D7%A7%D7%99%D7%A2%D7%99-Coinbase-Global-Inc-%D7%9C%D7%94%D7%91%D7%98%D7%99%D7%97-%D7%99%D7%99%D7%A2%D7%95%D7%A5-%D7%9C%D7%A4%D7%A0%D7%99-%D7%AA%D7%90%D7%A8%D7%99%D7%9A-%D7%99%D7%A2%D7%93-%D7%97%D7%A9%D7%95%D7%91-%D7%91%D7%AA%D7%91%D7%99%D7%A2%D7%94-%D7%99%D7%99%D7%A6%D7%95%D7%92%D7%99%D7%AA-%D7%91%D7%A0%D7%99%D7%99%D7%A8%D7%95%D7%AA-%D7%A2%D7%A8%D7%9A-%D7%A9%D7%94%D7%95%D7%92%D7%A9%D7%94-%D7%9C%D7%A8%D7%90%D7%A9%D7%95%D7%A0%D7%94-%D7%A2%D7%9C-%D7%99%D7%93%D7%99-%D7%94%D7%97%D7%91%D7%A8%D7%94-COIN.html***https://www.globenewswire.com/news-release/2024/10/20/2965823/673/en/RLF-THE-FIRST-FILING-FIRM-Encourages-Coinbase-Global-Inc-Investors-to-Secure-Counsel-Before-Important-Deadline-in-Securities-Class-Action-First-Filed-by-the-Firm-COIN.html', 'news_data': 'Coinbase, United Airlines ב-Sofi Tech הם בין 11 הרווחנים הגדולים ביותר במסגרת ה- Large Cap בשבוע שעבר (14-18 באוקטובר): האם האחרים נמצאים בתיק השקעות שלך?***RLF, חברה שהתחילה להליכים, ממליצה למשקיעים של Coinbase Global, Inc להבטיח ייעוצים לפני המועד החשוב בתובעה הגיווה הראשונה שהגישה החברה – COIN***RLF, חברת ההגשה הראשונה, מעודדת משקיעים מ-Coinbase Global, Inc. להבטיח ייעוץ לפני הדדליין החשוב בתביעת מחלקה של ניירות ערך שהוגשה על ידי החברה - COIN', 'core_focus': 'החלפת מטבעות קריפטו', 'core_focus_overview': 'החלפת מטבעות קריפטו היא פלטפורמה דיגיטלית בה משתמשים יכולים לסחור במטבעות קריפטו.', 'is_core_focus_future_potential': True, 'core_focus_future_potential_overview': 'כאשר העניין העולמי במטבעות דיגיטליים גדל, החלף מטבעות קריפטו יכול להיות עליו השפעה מרשימה על האופן בו המימן והמסחר מתנהלים ברחבי העולם.', 'company_overview': 'נוסדה בשנת 2012, Coinbase היא הפלטפורמה המובילה להחלפת מטבעות קריפטו בארצות הברית. החברה מתכננת להיות הנקודה המוגנת והתואמת לפי החוק לקמעונאים ואוניברסיטאות שמעוניינות להכנס לאקונומיה של מטבעות קריפטו. ניתן להקים חשבון ישירות עם החברה, במקום להשתמש במתווך, ורבים בוחרים לאפשר ל-Coinbase לפעול כמשמר המטבע שלהם, ומכוונת את החברה מעבר למה שמזגן מסחר כלכלי מסורתי. אף שהחברה עדיין מנה לרוב את ההכנסה מדמי עסקה שנגבים מהלקוחות קמעונאים שלה, Coinbase משתמשת בהשקעות פנימיות ומיוזמתני מימון להתרחב אל מנגנונים עסקיים סמוכים, כמו שירותים בנכסי תיווך נדל"ן ואנליטיקה של נתונים.', 'marketCap': 62162014997, 'last_price': 213.72, 'last_percent': -2.9471867762590254, 'start_end_percent': 21.170200703027557}, {'symbol': 'CKPT', 'news_source': 'אין נתונים', 'news_data': 'אין נתונים', 'core_focus': 'אימונו-אונקולוגיה', 'core_focus_overview': 'אימונו-אונקולוגיה מתמקדת בפיתוח שיטות להשתמש במערכת החיסונית כדי להלחם בסרטן.', 'is_core_focus_future_potential': True, 'core_focus_future_potential_overview': 'טיפולים באימונו-אונקולוגיה יכולים להוביל לתקדמות משמעותיות בטיפול בסרטן.', 'company_overview': 'חברת הביוטכנולוגיה של Checkpoint Therapeutics Inc, שממוקם בארצות הברית, עוסקת ברכישה, פיתוח ומסחר של טיפולים חדשניים, שאינם לבסיס כימותרפיה, למטופלים עם סרטנים המתפשטים בגוף. תיק הרישיונות של החברה כולל אנטי-גופים למטרה של חלבון תא פרוגרמי של הגירה של מוות 1 (PD-L1), לחלבון הקשור למונח ה-PD-L1', 'marketCap': 156264000, 'last_price': 3.18, 'last_percent': 5.6478405315614655, 'start_end_percent': 30.595482546201236}, {'symbol': 'HURA', 'news_source': 'אין נתונים', 'news_data': 'אין נתונים', 'core_focus': 'אימונו - אונקולוגיה', 'core_focus_overview': 'אימונו-אונקולוגיה מתמקדת בפיתוח שיטות להשתמש במערכת החיסונית כדי להלחם בסרטן.', 'is_core_focus_future_potential': True, 'core_focus_future_potential_overview': 'טיפולים באימונו-אונקולוגיה יכולים להוביל לתקדמות משמעותיות בטיפול בסרטן.', 'company_overview': 'TuHURA Biosciences Inc היא חברת אימונו-אונקולוגיה בשלב הרישום השלישי מפתחת טכנולוגיות חדשניות להתגבר על התנגדות לטיפול בסרטן. המועמד הפרטני לחיסון הסרטן של החברה, IFx-2.0, מעוצב להתגבר על התנגדות ראשית למחסומים. הוא מתכנן להתחיל מבחן רישום שלב 3 רנדומלי מבוקר באמצעות פלציבו של IFx-2.0 שלה כתיקון תיקון ל-Keytruda (pembrolizumab) בטיפול הראשון בסרטן מרקל המתקדם או ההמטסטטי.', 'marketCap': 172943703, 'last_price': 5.53, 'last_percent': -12.222222222222213, 'start_end_percent': 3006.7415730337084}, {'symbol': 'NNE', 'news_source': 'https://www.fool.com/investing/2024/10/20/a-295-billion-opportunity-is-hiding-in-plain-sight/?source=iedfolrf0000001', 'news_data': 'הזדמנות של 295 מיליארד דולר מטמנה במרחב. 2 מניות שאמורות לעזור לך להיכנס אליה.', 'core_focus': 'אנרגיה גרעינית', 'core_focus_overview': 'האנרגיה הגרעינית משתמשת בתגובות גרעיניות כדי ליצור חום, שאז משמש לחשמל.', 'is_core_focus_future_potential': True, 'core_focus_future_potential_overview': 'האנרגיה הגרעינית יכולה לספק מקור אנרגיה בקנה מידה גדול, אמין וחסר פליטה.', 'company_overview': 'Nano Nuclear Energy Inc היא חברה מוקדמת של אנרגיה גרעינית המפתחת פתרונות אנרגיה נקיים יותר קטנים, זולים ובטוחים. היא מתמקדת בארבעה תחומי עסקים כחלק מהפיתוח: עסקי מגירות גרעיניות מיקרו מפתח הדור הבא של מגירות גרעיניות מיקרו, במיוחד זאוס, מגירה עם ליבה מוצקה, ואודין, מגירה עם קירור מלח בלחץ נמוך. עסקי הייצור של דלק, עסקי הובלת דלק ושירותי ייעוץ גרעיני.', 'marketCap': 891762725, 'last_price': 27.36, 'last_percent': 34.25, 'start_end_percent': 52.51}, {'symbol': 'OKLO', 'news_source': 'https://www.benzinga.com/news/mid-cap/24/10/41419173/oklo-cleanspark-and-wolfspeed-are-among-top-7-mid-cap-gainers-last-week-oct-14-18-are-the-others-in***https://www.fool.com/investing/2024/10/20/a-295-billion-opportunity-is-hiding-in-plain-sight/?source=iedfolrf0000001', 'news_data': 'Oklo, CleanSpark ו-Wolfspeed נמנים עם 7 העולות הראשונות בבינוניות בשבוע שעבר (14-18 אוקטובר): האם השאר בתיק ההשקעות שלך? *** הזדמנות של 295 מיליארד דולר מטמנה במרחב. 2 מניות שאמורות לעזור לך להיכנס אליה.', 'core_focus': 'אנרגיה גרעינית', 'core_focus_overview': 'האנרגיה הגרעינית משתמשת בתגובות גרעיניות כדי ליצור חום, שאז משמש לחשמל.', 'is_core_focus_future_potential': True, 'core_focus_future_potential_overview': 'האנרגיה הגרעינית יכולה לספק מקור אנרגיה בקנה מידה גדול, אמין וחסר פליטה.', 'company_overview': "Oklo Inc מפתחת תחנות כוח של פיצ'ר מתקדמות לספק אנרגיה נקיה, אמינה וזולה בקנה מידה. החברה מקדמת שני מסילות משלימות לעניית הביקוש הזה: מספקת אנרגיה בקנה מידה מסחרי ללקוחות; ומוכרת שירותי מחזור דלק גרעיני משומש לשוק האמריקאי. החברה מתכננת למסחר את טכנולוגיית המגירה המהירה שלה עם מוצר ה-Aurora powerhouse. ה-Aurora powerhouse המסחרי הראשון מעוצב לייצר עד 15 מגה-וואט של חשמל (MWe) על דלק גרעיני משומש ודלק חדש.", 'marketCap': 2904180439, 'last_price': 22.31, 'last_percent': 22.38, 'start_end_percent': 143.83}, {'symbol': 'ARQQ', 'news_source': 'אין נתונים', 'news_data': 'אין נתונים', 'core_focus': 'חישוב קוונטי', 'core_focus_overview': 'חישוב קוונטי משתמש בעקרונות של מכניקה קוונטית לעיבוד מידע.', 'is_core_focus_future_potential': True, 'core_focus_future_potential_overview': 'המחשבים הקוונטים יכולים לפתור באופן פוטנציאלי בעיות מורכבות הרבה יותר מהר מאשר מחשבים קלאסיים, משנים את הנוף של הבינה המלאכותית והקריפטוגרפיה.', 'company_overview': 'Arqit Quantum Inc היא חברת אבטחת מידע שפיתחה טכנולוגיה של הסכם מפתח סימטרי שהופך את קישורי התקשורת של כל מכשיר מרושת או נתונים במנוחה לבטוחים מפני צורות נוכחיות ועתידיות של התקפה סייבר - אפילו התקפה ממחשב קוונטי. החברה מספקת את טכנולוגיית ההסכם הסימטרי שלה דרך מוצרה QuantumCloud. החברה מפעילה בשוק שהוא הספקת שירותי אבטחת מידע דרך לוויינים ופלטפורמות יבשתיות. החברה מפעילה ומייצרת את הכנסתה מהממלכה המאוחדת.', 'marketCap': 485655710, 'last_price': 7.08, 'last_percent': 19.191919191919183, 'start_end_percent': 68.97374701670643}, {'symbol': 'IONQ', 'news_source': 'https://www.benzinga.com/news/mid-cap/24/10/41419173/oklo-cleanspark-and-wolfspeed-are-among-top-7-mid-cap-gainers-last-week-oct-14-18-are-the-others-in***https://www.fool.com/investing/2024/10/16/3-artificial-intelligence-ai-stocks-that-could-mak/?source=iedfolrf0000001***https://www.benzinga.com/news/earnings/24/10/41292829/wall-street-analysts-think-ionq-is-a-good-investment-is-it', 'news_data': 'Oklo, CleanSpark ו- Wolfspeed הם בין שבעת הרווחנים הגדולים ביותר של השבוע שעבר (14-18 באוקטובר): האם האחרים בתיק שלך?***שלושה מניות של בינה מלאכותית (AI) שיכולות להפוך אותך למיליונר***אנליסטים מוול סטריט חושבים ש- IonQ היא השקעה טובה: האם זה נכון?', 'core_focus': 'חישוב קוונטי', 'core_focus_overview': 'חישוב קוונטי משתמש בעקרונות של מכניקה קוונטית לעיבוד מידע.', 'is_core_focus_future_potential': True, 'core_focus_future_potential_overview': 'המחשבים הקוונטים יכולים לפתור באופן פוטנציאלי בעיות מורכבות הרבה יותר מהר מאשר מחשבים קלאסיים, משנים את הנוף של הבינה המלאכותית והקריפטוגרפיה.', 'company_overview': 'IonQ Inc מוכרת גישה למספר מחשבים קוונטיים בעלי קיבולות קויט שונות ומתעסקת במחקר ופיתוח טכנולוגיות למחשבים קוונטיים בעלי יכולות חישוב מוגברות. החברה כיום מציעה גישה למחשביה הקוונטיים דרך פלטפורמות ענן וגם ללקוחות נבחרים דרך שירות הענן שלה. הגישה המבוססת ענן הזו מאפשרת זמינות רחבה של שירותי חישוב קוונטיים (QCaaS). החברה מקבלת את הכנסתה מהסכמי שירותי חישוב הקוונטיים שלה, שירותי ייעוץ שקשורים לפיתוח אלגוריתמים במערכת החישוב הקוונטית שלה, ולחוזות המשותפים לעיצוב, פיתוח, ובנייה של מערכות חישוב קוונטיים מיוחדות יחד עם שירותים קשורים.', 'marketCap': 9038703948, 'last_price': 14.76, 'last_percent': 10.977443609022552, 'start_end_percent': 38.46153846153846}, {'symbol': 'QUBT', 'news_source': 'אין נתונים', 'news_data': 'אין נתונים', 'core_focus': 'חישוב קוונטי', 'core_focus_overview': 'חישוב קוונטי משתמש בעקרונות של מכניקה קוונטית לעיבוד מידע.', 'is_core_focus_future_potential': True, 'core_focus_future_potential_overview': 'המחשבים הקוונטים יכולים לפתור באופן פוטנציאלי בעיות מורכבות הרבה יותר מהר מאשר מחשבים קלאסיים, משנים את הנוף של הבינה המלאכותית והקריפטוגרפיה.', 'company_overview': 'Quantum Computing Inc היא חברה אמריקאית שמשתמשת באופטיקה קוונטית הליניארית (התקנים אופטיים שפלטם בשל השפעות קוונטיות הוא בהתאמה אקספוננציאלית, לא ליניארית, לקלטים) למסירת מוצרים קוונטיים ליישומים של חישוב ביצועים גבוהים. מוצריה של QCi מעוצבים לעבודה בטמפרטורת החדר ולשימוש בצריכת חשמל נמוכה במחיר נוח. תיק הטכנולוגיה המרכזי והמוצרים של החברה מציעים יכולת חדשה בתחומים של חישוב ביצועים גבוהים, הבינה המלאכותית, אבטחת מידע ויישומים של תחומים רחוקים.', 'marketCap': 1968528546, 'last_price': 1.14, 'last_percent': 23.913043478260843, 'start_end_percent': 64.83516483516483}, {'symbol': 'RGTI', 'news_source': 'אין נתונים', 'news_data': 'אין נתונים', 'core_focus': 'חישוב קוונטי', 'core_focus_overview': 'חישוב קוונטי משתמש בעקרונות של מכניקה קוונטית לעיבוד מידע.', 'is_core_focus_future_potential': True, 'core_focus_future_potential_overview': 'המחשבים הקוונטים יכולים לפתור באופן פוטנציאלי בעיות מורכבות הרבה יותר מהר מאשר מחשבים קלאסיים, משנים את הנוף של הבינה המלאכותית והקריפטוגרפיה.', 'company_overview': 'חברת Rigetti Computing Inc עוסקת בחישוב קוונטי מלא. תשתית הקוונטים הקלאסית הייחודית שלה מספקת אינטגרציה עם עננים ציבוריים ופרטיים בעיכוב נמוך במיוחד לחישוב קוונטי ביצועים גבוהים באופן מעשי. החברה פיתחה את המעבד הקוונטי הראשון מסוגו למערכות חישוב קוונטיות מתקנת. מרבית ההכנסה שלה מגיעה מארצות הברית.', 'marketCap': 4273553981, 'last_price': 1.28, 'last_percent': 15.315315315315313, 'start_end_percent': 56.78588926996571}, {'symbol': 'NPWR', 'news_source': 'אין נתונים', 'news_data': 'אין נתונים', 'core_focus': 'אנרגיה מתחדשת', 'core_focus_overview': 'אנרגיה מתחדשת קשורה לאנרגיה שנוצרה ממשאבים טבעיים שניתן למלא אותם מחדש.', 'is_core_focus_future_potential': True, 'core_focus_future_potential_overview': 'לאנרגיה מתחדשת יש את הפוטנציאל להפחית את התלות שלנו בדלקים מאובנים, מכה בשינוי האקלים.', 'company_overview': "NET Power Inc היא חברת טכנולוגיה לאנרגיה נקיה שפיתחה מערכת ייחודית להפקת חשמל שהיא מתייחסת לכך בשם 'מעגל החשמל של NET' המתוכנן להפיק חשמל נקי, אמין וזול מגז טבעי בעת שלמעשה תופס את כל הפליטות האטמוספריות.", 'marketCap': 796880927, 'last_price': 8.92, 'last_percent': 9.313725490196067, 'start_end_percent': 29.27536231884057}, {'symbol': 'NRGV', 'news_source': 'https://www.benzinga.com/markets/equities/24/10/41435160/why-is-electrical-equipment-company-energy-vault-stock-rocketing-on-monday', 'news_data': 'למה מניית Energy Vault, חברת הציוד החשמלי, מטיסה ביום שני?', 'core_focus': 'אנרגיה מתחדשת', 'core_focus_overview': 'אנרגיה מתחדשת קשורה לאנרגיה שנוצרה ממשאבים טבעיים שניתן למלא אותם מחדש.', 'is_core_focus_future_potential': True, 'core_focus_future_potential_overview': 'לאנרגיה מתחדשת יש את הפוטנציאל להפחית את התלות שלנו בדלקים מאובנים, מכה בשינוי האקלים.', 'company_overview': 'Energy Vault Holdings Inc היא חברה לאחסון אנרגיה בקנה מידה גדול שמתמרנת מעבר מהיר יותר לאנרגיה מתחדשת על ידי פתרון בעיות הבלתי נמנעות של מקורות האנרגיה המתחדשים הנפוצים, סולארים ורוח. נוכחות גאוגרפית בארצות הברית, בסין ואחרים. רוב ההכנסות שלה מתארצות הברית.', 'marketCap': 346832752, 'last_price': 1.88, 'last_percent': 24.50331125827814, 'start_end_percent': 70.90909090909089}]
    a = EmailSender("2024-10-21")
    b = a.send_email(data)
    print(b)